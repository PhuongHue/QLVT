USE [QLVT_DATHANG]
GO
/****** Object:  Table [dbo].[ChiNhanh]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[ChiNhanh](
	[MACN] [nchar](10) NOT NULL,
	[ChiNhanh] [nvarchar](100) NOT NULL,
	[DIACHI] [nvarchar](100) NOT NULL,
	[SoDT] [nvarchar](15) NOT NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_ChiNhanh] PRIMARY KEY CLUSTERED 
(
	[MACN] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CTDDH]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CTDDH](
	[MasoDDH] [nchar](8) NOT NULL,
	[MAVT] [nchar](4) NOT NULL,
	[SOLUONG] [int] NULL,
	[DONGIA] [float] NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_CTDDH] PRIMARY KEY CLUSTERED 
(
	[MasoDDH] ASC,
	[MAVT] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CTPN]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CTPN](
	[MAPN] [nchar](8) NOT NULL,
	[MAVT] [nchar](4) NOT NULL,
	[SOLUONG] [int] NOT NULL,
	[DONGIA] [float] NOT NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_CTPN] PRIMARY KEY CLUSTERED 
(
	[MAPN] ASC,
	[MAVT] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CTPX]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CTPX](
	[MAPX] [nchar](8) NOT NULL,
	[MAVT] [nchar](4) NOT NULL,
	[SOLUONG] [int] NOT NULL,
	[DONGIA] [float] NOT NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_CTPX] PRIMARY KEY CLUSTERED 
(
	[MAPX] ASC,
	[MAVT] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[DatHang]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[DatHang](
	[MasoDDH] [nchar](8) NOT NULL,
	[NGAY] [date] NOT NULL,
	[NhaCC] [nvarchar](100) NOT NULL,
	[MANV] [int] NOT NULL,
	[MAKHO] [nchar](4) NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_DatHang] PRIMARY KEY CLUSTERED 
(
	[MasoDDH] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Kho]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Kho](
	[MAKHO] [nchar](4) NOT NULL,
	[TENKHO] [nvarchar](30) NOT NULL,
	[DIACHI] [nvarchar](100) NULL,
	[MACN] [nchar](10) NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_Kho] PRIMARY KEY CLUSTERED 
(
	[MAKHO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[NhanVien]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[NhanVien](
	[MANV] [int] NOT NULL,
	[HO] [nvarchar](40) NULL,
	[TEN] [nvarchar](10) NULL,
	[DIACHI] [nvarchar](100) NULL,
	[NGAYSINH] [datetime] NULL,
	[LUONG] [float] NULL,
	[MACN] [nchar](10) NULL,
	[TrangThaiXoa] [int] NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_NhanVien] PRIMARY KEY CLUSTERED 
(
	[MANV] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PhieuNhap]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PhieuNhap](
	[MAPN] [nchar](8) NOT NULL,
	[NGAY] [date] NOT NULL,
	[MasoDDH] [nchar](8) NOT NULL,
	[MANV] [int] NOT NULL,
	[MAKHO] [nchar](4) NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_PhieuNhap] PRIMARY KEY CLUSTERED 
(
	[MAPN] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PhieuXuat]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PhieuXuat](
	[MAPX] [nchar](8) NOT NULL,
	[NGAY] [date] NOT NULL,
	[HOTENKH] [nvarchar](100) NOT NULL,
	[MANV] [int] NOT NULL,
	[MAKHO] [nchar](4) NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_PX] PRIMARY KEY CLUSTERED 
(
	[MAPX] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Vattu]    Script Date: 9/14/2018 1:26:57 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Vattu](
	[MAVT] [nchar](4) NOT NULL,
	[TENVT] [nvarchar](30) NOT NULL,
	[DVT] [nvarchar](15) NOT NULL,
	[SOLUONGTON] [int] NOT NULL,
	[rowguid] [uniqueidentifier] ROWGUIDCOL  NOT NULL,
 CONSTRAINT [PK_VatTu] PRIMARY KEY CLUSTERED 
(
	[MAVT] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
INSERT [dbo].[ChiNhanh] ([MACN], [ChiNhanh], [DIACHI], [SoDT], [rowguid]) VALUES (N'CN1       ', N'Chi nhánh 1 TP HCM', N'35 Trần Hưng Đạo P1 Q1', N'999111888', N'e2e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[ChiNhanh] ([MACN], [ChiNhanh], [DIACHI], [SoDT], [rowguid]) VALUES (N'CN2       ', N'Chi nhánh 2 TP Cần Thơ', N'27 Nguyễn Huệ', N'333222111', N'e3e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[CTDDH] ([MasoDDH], [MAVT], [SOLUONG], [DONGIA], [rowguid]) VALUES (N'MDDH01  ', N'M01 ', 10, 400000, N'00e88280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[CTDDH] ([MasoDDH], [MAVT], [SOLUONG], [DONGIA], [rowguid]) VALUES (N'MDDH02  ', N'MU01', 6, 500000, N'01e88280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[CTDDH] ([MasoDDH], [MAVT], [SOLUONG], [DONGIA], [rowguid]) VALUES (N'MDDH03  ', N'MX02', 20, 700000, N'02e88280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[CTPN] ([MAPN], [MAVT], [SOLUONG], [DONGIA], [rowguid]) VALUES (N'PN01    ', N'M01 ', 10, 500, N'05e88280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[CTPX] ([MAPX], [MAVT], [SOLUONG], [DONGIA], [rowguid]) VALUES (N'PX01    ', N'MX02', 4, 5600, N'03e88280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[CTPX] ([MAPX], [MAVT], [SOLUONG], [DONGIA], [rowguid]) VALUES (N'PX03    ', N'M01 ', 5, 7000, N'04e88280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[DatHang] ([MasoDDH], [NGAY], [NhaCC], [MANV], [MAKHO], [rowguid]) VALUES (N'MDDH01  ', CAST(N'2017-09-15' AS Date), N'CTY Điện máy xanh', 1, NULL, N'f8e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[DatHang] ([MasoDDH], [NGAY], [NhaCC], [MANV], [MAKHO], [rowguid]) VALUES (N'MDDH02  ', CAST(N'2017-09-15' AS Date), N'CTY Panasonic', 1, NULL, N'f9e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[DatHang] ([MasoDDH], [NGAY], [NhaCC], [MANV], [MAKHO], [rowguid]) VALUES (N'MDDH03  ', CAST(N'2017-09-15' AS Date), N'CTY Samsung', 8, NULL, N'fae78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Kho] ([MAKHO], [TENKHO], [DIACHI], [MACN], [rowguid]) VALUES (N'K1N1', N'KHO A', N'28-30 Ngô Quyền P1 Q5', N'CN1       ', N'eae78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Kho] ([MAKHO], [TENKHO], [DIACHI], [MACN], [rowguid]) VALUES (N'K1N2', N'LONG PHU', N'127 Ngô Thì Nhậm', N'CN2       ', N'efe78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Kho] ([MAKHO], [TENKHO], [DIACHI], [MACN], [rowguid]) VALUES (N'K2N1', N'KHO B', N'78 Nguyen Trai, TPHCM', N'CN1       ', N'ebe78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Kho] ([MAKHO], [TENKHO], [DIACHI], [MACN], [rowguid]) VALUES (N'K2N2', N'KHO VT', N'23,Hoàng Diệu 2', N'CN2       ', N'ede78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Kho] ([MAKHO], [TENKHO], [DIACHI], [MACN], [rowguid]) VALUES (N'K3N1', N'CONG NGHIEP', N'555 Trần Hưng đạo', N'CN1       ', N'e9e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Kho] ([MAKHO], [TENKHO], [DIACHI], [MACN], [rowguid]) VALUES (N'K3N2', N'KHO XD', N'34,Quang Trung THủ Đức TPHCM', N'CN2       ', N'eee78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Kho] ([MAKHO], [TENKHO], [DIACHI], [MACN], [rowguid]) VALUES (N'K4N1', N'KHO HH', N'134 Đình Phong Phú ,Quận 9,TPHCM', N'CN1       ', N'ece78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (1, N'Lương', N'Trang', N'Thủ Đức', CAST(N'2000-05-05T00:00:00.000' AS DateTime), 7000000, N'CN1       ', 0, N'f0e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (2, N'Nguyễn', N'Hà', N'Quận 9', CAST(N'2001-03-05T00:00:00.000' AS DateTime), 4000000, N'CN2       ', 1, N'f1e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (3, N'Trần', N'Thanh', N'Quận 10', CAST(N'1994-07-04T00:00:00.000' AS DateTime), 5000000, N'CN1       ', 0, N'f2e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (4, N'Thái', N'Hà', N'Quận 6', CAST(N'2001-07-06T00:00:00.000' AS DateTime), 7000000, N'CN1       ', 1, N'f3e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (5, N'Hồ', N'Thái', N'Bình Thạnh', CAST(N'2001-02-05T00:00:00.000' AS DateTime), 6000000, N'CN2       ', 0, N'f4e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (6, N'Hà', N'An', N'Gò Vấp', CAST(N'1996-04-06T00:00:00.000' AS DateTime), 5000000, N'CN1       ', 0, N'f5e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (7, N'Lê', N'Trà', N'Phú Nhuận', CAST(N'1996-03-07T00:00:00.000' AS DateTime), 7000000, N'CN2       ', 1, N'f6e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[NhanVien] ([MANV], [HO], [TEN], [DIACHI], [NGAYSINH], [LUONG], [MACN], [TrangThaiXoa], [rowguid]) VALUES (8, N'Nguyễn', N'Hợp', N'Thủ Đức', CAST(N'1997-07-06T00:00:00.000' AS DateTime), 8000000, N'CN1       ', 0, N'f7e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[PhieuNhap] ([MAPN], [NGAY], [MasoDDH], [MANV], [MAKHO], [rowguid]) VALUES (N'PN01    ', CAST(N'2017-09-15' AS Date), N'MDDH01  ', 1, NULL, N'fee78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[PhieuNhap] ([MAPN], [NGAY], [MasoDDH], [MANV], [MAKHO], [rowguid]) VALUES (N'PN03    ', CAST(N'2017-09-15' AS Date), N'MDDH03  ', 3, NULL, N'ffe78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[PhieuXuat] ([MAPX], [NGAY], [HOTENKH], [MANV], [MAKHO], [rowguid]) VALUES (N'PX01    ', CAST(N'2017-09-15' AS Date), N'Nguyễn Thị Ánh Hồng', 1, NULL, N'fbe78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[PhieuXuat] ([MAPX], [NGAY], [HOTENKH], [MANV], [MAKHO], [rowguid]) VALUES (N'PX02    ', CAST(N'2017-09-15' AS Date), N'Trần Thị Mỹ Hà', 3, NULL, N'fce78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[PhieuXuat] ([MAPX], [NGAY], [HOTENKH], [MANV], [MAKHO], [rowguid]) VALUES (N'PX03    ', CAST(N'2017-09-15' AS Date), N'Trần Bích Phương', 7, NULL, N'fde78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Vattu] ([MAVT], [TENVT], [DVT], [SOLUONGTON], [rowguid]) VALUES (N'M01 ', N'Máy giặt tự động cửa trước', N'Cái', 0, N'e4e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Vattu] ([MAVT], [TENVT], [DVT], [SOLUONGTON], [rowguid]) VALUES (N'MU01', N'Máy uốn tóc', N'Cái', 10, N'e7e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Vattu] ([MAVT], [TENVT], [DVT], [SOLUONGTON], [rowguid]) VALUES (N'MX02', N'Máy sấy', N'Cái', 1, N'e6e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Vattu] ([MAVT], [TENVT], [DVT], [SOLUONGTON], [rowguid]) VALUES (N'MX07', N'Máy lạnh LG', N'Cái', 4, N'e5e78280-64b7-e811-85fe-3417eb5ec139')
INSERT [dbo].[Vattu] ([MAVT], [TENVT], [DVT], [SOLUONGTON], [rowguid]) VALUES (N'TV02', N'Ti vi Sam Sung', N'Cái', 0, N'e8e78280-64b7-e811-85fe-3417eb5ec139')
SET ANSI_PADDING ON
GO
/****** Object:  Index [UK_ChiNhanh]    Script Date: 9/14/2018 1:26:57 ******/
ALTER TABLE [dbo].[ChiNhanh] ADD  CONSTRAINT [UK_ChiNhanh] UNIQUE NONCLUSTERED 
(
	[ChiNhanh] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [UK_TENKHO]    Script Date: 9/14/2018 1:26:57 ******/
ALTER TABLE [dbo].[Kho] ADD  CONSTRAINT [UK_TENKHO] UNIQUE NONCLUSTERED 
(
	[TENKHO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [UK_MaSoDDH]    Script Date: 9/14/2018 1:26:57 ******/
ALTER TABLE [dbo].[PhieuNhap] ADD  CONSTRAINT [UK_MaSoDDH] UNIQUE NONCLUSTERED 
(
	[MasoDDH] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
SET ANSI_PADDING ON
GO
/****** Object:  Index [UK_TENVT]    Script Date: 9/14/2018 1:26:57 ******/
ALTER TABLE [dbo].[Vattu] ADD  CONSTRAINT [UK_TENVT] UNIQUE NONCLUSTERED 
(
	[TENVT] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
ALTER TABLE [dbo].[ChiNhanh] ADD  CONSTRAINT [MSmerge_df_rowguid_BB116A0F3CF64450A0994B902BFDFE2B]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[CTDDH] ADD  CONSTRAINT [MSmerge_df_rowguid_B2F6B0A6FB0A4D199F31CA1CE52CC58A]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[CTPN] ADD  CONSTRAINT [MSmerge_df_rowguid_AE8D75FCAA724B268CF7FC4A4260F5ED]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[CTPX] ADD  CONSTRAINT [MSmerge_df_rowguid_F4D3FD948D464D60B75860F9A72A0CF9]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[DatHang] ADD  CONSTRAINT [DF_DatHang_MasoDDH]  DEFAULT (getdate()) FOR [MasoDDH]
GO
ALTER TABLE [dbo].[DatHang] ADD  CONSTRAINT [DF_DatHang_NGAY]  DEFAULT (getdate()) FOR [NGAY]
GO
ALTER TABLE [dbo].[DatHang] ADD  CONSTRAINT [MSmerge_df_rowguid_25A2137188E44288AEA5504BFFE9F87F]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[Kho] ADD  CONSTRAINT [MSmerge_df_rowguid_D543D4F3D38E459C9DB3305EC267DB8C]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[NhanVien] ADD  CONSTRAINT [DF_NhanVien_TrangThaiXoa]  DEFAULT ((0)) FOR [TrangThaiXoa]
GO
ALTER TABLE [dbo].[NhanVien] ADD  CONSTRAINT [MSmerge_df_rowguid_A4112374E047498C83336256E64E0AB8]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[PhieuNhap] ADD  CONSTRAINT [DF_PhieuNhap_MAPN]  DEFAULT (getdate()) FOR [MAPN]
GO
ALTER TABLE [dbo].[PhieuNhap] ADD  CONSTRAINT [DF_PhieuNhap_NGAY]  DEFAULT (getdate()) FOR [NGAY]
GO
ALTER TABLE [dbo].[PhieuNhap] ADD  CONSTRAINT [MSmerge_df_rowguid_7DF744F3F07E44A19DA8D7B95C72D3C3]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[PhieuXuat] ADD  CONSTRAINT [DF_PX_NGAY]  DEFAULT (getdate()) FOR [NGAY]
GO
ALTER TABLE [dbo].[PhieuXuat] ADD  CONSTRAINT [MSmerge_df_rowguid_7C7A5996ED1A4E6590E33FA325A6B1E2]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[Vattu] ADD  CONSTRAINT [MSmerge_df_rowguid_6F7CEE38878041FEA5C158828CAE28BA]  DEFAULT (newsequentialid()) FOR [rowguid]
GO
ALTER TABLE [dbo].[CTDDH]  WITH NOCHECK ADD  CONSTRAINT [FK_CTDDH_DatHang] FOREIGN KEY([MasoDDH])
REFERENCES [dbo].[DatHang] ([MasoDDH])
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[CTDDH] CHECK CONSTRAINT [FK_CTDDH_DatHang]
GO
ALTER TABLE [dbo].[CTDDH]  WITH NOCHECK ADD  CONSTRAINT [FK_CTDDH_VatTu] FOREIGN KEY([MAVT])
REFERENCES [dbo].[Vattu] ([MAVT])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[CTDDH] CHECK CONSTRAINT [FK_CTDDH_VatTu]
GO
ALTER TABLE [dbo].[CTPN]  WITH NOCHECK ADD  CONSTRAINT [FK_CTPN_PhieuNhap] FOREIGN KEY([MAPN])
REFERENCES [dbo].[PhieuNhap] ([MAPN])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[CTPN] CHECK CONSTRAINT [FK_CTPN_PhieuNhap]
GO
ALTER TABLE [dbo].[CTPN]  WITH NOCHECK ADD  CONSTRAINT [FK_CTPN_VatTu] FOREIGN KEY([MAVT])
REFERENCES [dbo].[Vattu] ([MAVT])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[CTPN] CHECK CONSTRAINT [FK_CTPN_VatTu]
GO
ALTER TABLE [dbo].[CTPX]  WITH NOCHECK ADD  CONSTRAINT [FK_CTPX_PX] FOREIGN KEY([MAPX])
REFERENCES [dbo].[PhieuXuat] ([MAPX])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[CTPX] CHECK CONSTRAINT [FK_CTPX_PX]
GO
ALTER TABLE [dbo].[CTPX]  WITH NOCHECK ADD  CONSTRAINT [FK_CTPX_VatTu] FOREIGN KEY([MAVT])
REFERENCES [dbo].[Vattu] ([MAVT])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[CTPX] CHECK CONSTRAINT [FK_CTPX_VatTu]
GO
ALTER TABLE [dbo].[DatHang]  WITH CHECK ADD  CONSTRAINT [FK_DatHang_Kho] FOREIGN KEY([MAKHO])
REFERENCES [dbo].[Kho] ([MAKHO])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[DatHang] CHECK CONSTRAINT [FK_DatHang_Kho]
GO
ALTER TABLE [dbo].[DatHang]  WITH NOCHECK ADD  CONSTRAINT [FK_DatHang_NhanVien] FOREIGN KEY([MANV])
REFERENCES [dbo].[NhanVien] ([MANV])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[DatHang] CHECK CONSTRAINT [FK_DatHang_NhanVien]
GO
ALTER TABLE [dbo].[Kho]  WITH NOCHECK ADD  CONSTRAINT [FK_Kho_Kho] FOREIGN KEY([MACN])
REFERENCES [dbo].[ChiNhanh] ([MACN])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[Kho] CHECK CONSTRAINT [FK_Kho_Kho]
GO
ALTER TABLE [dbo].[NhanVien]  WITH CHECK ADD  CONSTRAINT [FK_NhanVien_ChiNhanh] FOREIGN KEY([MACN])
REFERENCES [dbo].[ChiNhanh] ([MACN])
GO
ALTER TABLE [dbo].[NhanVien] CHECK CONSTRAINT [FK_NhanVien_ChiNhanh]
GO
ALTER TABLE [dbo].[PhieuNhap]  WITH NOCHECK ADD  CONSTRAINT [FK_PhieuNhap_DatHang] FOREIGN KEY([MasoDDH])
REFERENCES [dbo].[DatHang] ([MasoDDH])
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[PhieuNhap] CHECK CONSTRAINT [FK_PhieuNhap_DatHang]
GO
ALTER TABLE [dbo].[PhieuNhap]  WITH CHECK ADD  CONSTRAINT [FK_PhieuNhap_Kho] FOREIGN KEY([MAKHO])
REFERENCES [dbo].[Kho] ([MAKHO])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[PhieuNhap] CHECK CONSTRAINT [FK_PhieuNhap_Kho]
GO
ALTER TABLE [dbo].[PhieuNhap]  WITH NOCHECK ADD  CONSTRAINT [FK_PhieuNhap_NhanVien] FOREIGN KEY([MANV])
REFERENCES [dbo].[NhanVien] ([MANV])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[PhieuNhap] CHECK CONSTRAINT [FK_PhieuNhap_NhanVien]
GO
ALTER TABLE [dbo].[PhieuXuat]  WITH CHECK ADD  CONSTRAINT [FK_PhieuXuat_Kho] FOREIGN KEY([MAKHO])
REFERENCES [dbo].[Kho] ([MAKHO])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[PhieuXuat] CHECK CONSTRAINT [FK_PhieuXuat_Kho]
GO
ALTER TABLE [dbo].[PhieuXuat]  WITH NOCHECK ADD  CONSTRAINT [FK_PX_NhanVien] FOREIGN KEY([MANV])
REFERENCES [dbo].[NhanVien] ([MANV])
ON UPDATE CASCADE
NOT FOR REPLICATION 
GO
ALTER TABLE [dbo].[PhieuXuat] CHECK CONSTRAINT [FK_PX_NhanVien]
GO
ALTER TABLE [dbo].[CTDDH]  WITH NOCHECK ADD  CONSTRAINT [CK_DONGIA] CHECK NOT FOR REPLICATION (([DONGIA]>(0)))
GO
ALTER TABLE [dbo].[CTDDH] CHECK CONSTRAINT [CK_DONGIA]
GO
ALTER TABLE [dbo].[CTDDH]  WITH NOCHECK ADD  CONSTRAINT [CK_SOLUONG] CHECK NOT FOR REPLICATION (([SOLUONG]>(0)))
GO
ALTER TABLE [dbo].[CTDDH] CHECK CONSTRAINT [CK_SOLUONG]
GO
ALTER TABLE [dbo].[CTPN]  WITH NOCHECK ADD  CONSTRAINT [CK_DONGIACTPN] CHECK NOT FOR REPLICATION (([DONGIA]>=(0)))
GO
ALTER TABLE [dbo].[CTPN] CHECK CONSTRAINT [CK_DONGIACTPN]
GO
ALTER TABLE [dbo].[CTPN]  WITH NOCHECK ADD  CONSTRAINT [CK_SOLUONGCTPN] CHECK NOT FOR REPLICATION (([SOLUONG]>(0)))
GO
ALTER TABLE [dbo].[CTPN] CHECK CONSTRAINT [CK_SOLUONGCTPN]
GO
ALTER TABLE [dbo].[CTPX]  WITH NOCHECK ADD  CONSTRAINT [CK_DONGIACTPX] CHECK NOT FOR REPLICATION (([DONGIA]>=(0)))
GO
ALTER TABLE [dbo].[CTPX] CHECK CONSTRAINT [CK_DONGIACTPX]
GO
ALTER TABLE [dbo].[CTPX]  WITH NOCHECK ADD  CONSTRAINT [CK_SOLUONGCTPX] CHECK NOT FOR REPLICATION (([SOLUONG]>(0)))
GO
ALTER TABLE [dbo].[CTPX] CHECK CONSTRAINT [CK_SOLUONGCTPX]
GO
ALTER TABLE [dbo].[NhanVien]  WITH NOCHECK ADD  CONSTRAINT [CK_LUONG] CHECK NOT FOR REPLICATION (([LUONG]>=(4000000)))
GO
ALTER TABLE [dbo].[NhanVien] CHECK CONSTRAINT [CK_LUONG]
GO
ALTER TABLE [dbo].[Vattu]  WITH NOCHECK ADD  CONSTRAINT [CK_SOLUONGTON] CHECK NOT FOR REPLICATION (([SOLUONGTON]>=(0)))
GO
ALTER TABLE [dbo].[Vattu] CHECK CONSTRAINT [CK_SOLUONGTON]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
USE QLVT_DATHANG
GO
CREATE PROCEDURE CreateRoleSystem
AS
BEGIN
	EXEC sp_addrole 'CONGTY'; 
	EXEC sp_addrole 'CHINHANH';
	EXEC sp_addrole 'USER';
	EXEC sp_addrolemember db_owner, 'CHINHANH';
	EXEC sp_addrolemember db_securityadmin, 'CONGTY';
	EXEC sp_addrolemember db_accessadmin, 'CONGTY';
	EXEC sp_addrolemember db_datareader, 'CONGTY';
	EXEC sp_addrolemember db_datareader, 'USER';
	EXEC sp_addrolemember db_datawriter, 'USER';
END
GO
CREATE TRIGGER [dbo].[TG_UPDATE_NhapHang]
ON [dbo].[CTPN]
FOR UPDATE
AS
BEGIN
	DECLARE @HieuSo INT, @InsertedSOLUONG INT, @InsertedMAVT nvarchar(4), @MasoDDH nchar(8), @SOLUONG_NHAP INT;
	SET @InsertedSOLUONG = (SELECT SOLUONG FROM inserted);
	SET @InsertedMAVT = (SELECT MAVT FROM inserted);
	SET @MasoDDH = (SELECT MasoDDH FROM PhieuNhap where MAPN = (SELECT MAPN FROM inserted))
	SET @SOLUONG_NHAP = (SELECT SOLUONG FROM CTDDH WHERE MAVT = @InsertedMAVT AND MasoDDH = @MasoDDH);
	if(@InsertedSOLUONG > @SOLUONG_NHAP)
	begin
		RAISERROR(N'QUA SO LUONG at column ''SOLUONG''.',16,1);
		ROLLBACK;

	end
END
GO
CREATE TRIGGER TG_INSERT_NhapHang
ON CTPN
FOR INSERT
AS
BEGIN
	DECLARE @HieuSo INT, @InsertedSOLUONG INT, @InsertedMAVT nvarchar(4), @MasoDDH nchar(8), @SOLUONG_NHAP INT;
	SET @InsertedSOLUONG = (SELECT SOLUONG FROM inserted);
	SET @InsertedMAVT = (SELECT MAVT FROM inserted);
	SET @MasoDDH = (SELECT MasoDDH FROM PhieuNhap where MAPN = (SELECT MAPN FROM inserted))
	SET @SOLUONG_NHAP = (SELECT SOLUONG FROM CTDDH WHERE MAVT = @InsertedMAVT AND MasoDDH = @MasoDDH);
	if(@InsertedSOLUONG > @SOLUONG_NHAP)
	begin
		RAISERROR(N'QUA SO LUONG at column ''SOLUONG''.',16,1);
		ROLLBACK;

	end
END
GO
CREATE PROC [dbo].[SP_DDH_CHUA_NHAP]
AS
BEGIN
	SELECT temp.MasoDDH,temp.NGAY,temp.NhaCC,temp.HOTEN,TENVT,temp.SOLUONG,temp.DONGIA from
	(SELECT CTDDH.MasoDDH,dhnv.NGAY,dhnv.NhaCC,dhnv.HOTEN,MAVT,SOLUONG,DONGIA from
	(SELECT dh.MasoDDH,dh.NGAY,dh.NhaCC,HOTEN=HO+' '+TEN from
	(SELECT	* FROM dbo.DatHang WHERE MasoDDH NOT IN (SELECT MasoDDH FROM dbo.PhieuNhap)) AS dh
	JOIN dbo.NhanVien on dh.MANV =dbo.NhanVien.MANV) AS dhnv JOIN dbo.CTDDH ON CTDDH.MasoDDH = dhnv.MasoDDH) AS temp
	JOIN dbo.Vattu on temp.MAVT=dbo.Vattu.MAVT
END
GO
CREATE PROC [dbo].[SP_DSNV]
AS
SELECT MANV, HO + '  ' + TEN AS HOTEN, DIACHI, NGAYSINH, LUONG, MACN
FROM dbo.NhanVien WHERE TrangThaiXoa = 0 ORDER BY TEN, HO
GO
CREATE PROC SP_List_LOGIN
AS
BEGIN 
	SELECT NhanVien.MANV, NhanVien.HO, NhanVien.TEN, NhanVien.MACN FROM 
	(SELECT logins.name AS LOGINNAME, users.name AS USERNAME
		FROM sys.database_principals AS users 
		INNER JOIN sys.server_principals AS logins 
			ON logins.sid = users.sid WHERE users.name != 'dbo' and users.name != 'HTKN' 
	) 
	AS LG 
	full outer join
	NhanVien 
	ON LG.USERNAME = NhanVien.MANV WHERE LOGINNAME IS NULL;
END
GO
CREATE PROC [dbo].[SP_SLVT] @mavt NCHAR(4),@sl int
AS
BEGIN
	 SET XACT_ABORT ON 
  --SET TRAN ISOLATION LEVEL SNAPSHOT
	BEGIN DISTRIBUTED TRANSACTION;
	UPDATE dbo.Vattu SET SOLUONGTON = SOLUONGTON+@sl WHERE MAVT = @mavt
	UPDATE LINK_QLVT.QLVT_DATHANG.dbo.Vattu SET SOLUONGTON= SOLUONGTON+@sl WHERE MAVT = @mavt
	COMMIT TRAN
END
GO
CREATE PROC [dbo].[SP_TAOLOGIN]
  @LGNAME VARCHAR(50),
  @PASS VARCHAR(50),
  @USERNAME VARCHAR(10),
  @ROLE VARCHAR(10),
  @TYPE VARCHAR(10) = NULL
AS
BEGIN
  DECLARE @RET INT

  if(@ROLE = 'CONGTY')
  BEGIN
	DECLARE @RunStoredProcSQL NVARCHAR(1000);
	SET @RunStoredProcSQL = N'LINK_QLVT.QLVT_DATHANG.dbo.SP_TAOLOGIN_CONGTY @LGNAME = '''+@LGNAME
							+N''', @PASS = '''+@PASS
							+N''', @USERNAME = '''+@USERNAME
							+N''', @ROLE = '''+@ROLE
							+N''', @TYPE = ''REMOTE''';
	if(@TYPE IS NULL) EXEC @RET = sp_executesql @RunStoredProcSQL;
	IF (@RET != 0) RETURN @RET -- LOI TU PHIA LINKED SERVER
  END
  EXEC @RET= SP_ADDLOGIN @LGNAME, @PASS,'QLVT_DATHANG'
  IF (@RET =1)  -- LOGIN NAME BI TRUNG
     RETURN 1

  EXEC @RET= SP_GRANTDBACCESS @LGNAME, @USERNAME
  IF (@RET =1)  -- USER  NAME BI TRUNG
  BEGIN
       EXEC SP_DROPLOGIN @LGNAME
       RETURN 2
  END
  EXEC sp_addrolemember @ROLE, @USERNAME
  IF @ROLE= 'CONGTY'
    EXEC sp_addsrvrolemember @LGNAME, 'SecurityAdmin'
RETURN 0  -- THANH CONG
END
GO
CREATE PROC [dbo].[SP_TKPN] @start NVARCHAR(20),@end NVARCHAR(20),@ct int
AS
BEGIN
	IF 1=0 BEGIN
		SET FMTONLY OFF
	END

	SELECT * INTO #pn  FROM dbo.PhieuNhap WHERE NGAY BETWEEN CONVERT(DATETIME,@start,103) AND CONVERT(DATETIME,@end,103)
	SELECT MAVT,CAST(Month(#pn.NGAY) as varchar) + '-' + cast(YEAR(#pn.NGAY) as varchar) AS NGAY,SUM(SOLUONG) AS TONGSL,SUM(DONGIA) AS TONGGIA
	INTO #temp
	FROM #pn JOIN dbo.CTPN on CTPN.MAPN=#pn.MAPN  
	GROUP BY MAVT,CAST(Month(#pn.NGAY) as varchar) + '-' + cast(YEAR(#pn.NGAY) as varchar) 

	SELECT NGAY,TENVT,TONGSL,TONGGIA INTO #kq FROM #temp JOIN dbo.Vattu ON Vattu.MAVT = #temp.MAVT
	
	IF(@ct=0)
	BEGIN
		SELECT * FROM #kq
	END
	ELSE
	BEGIN
	
	SELECT * INTO #pn1  FROM LINK_QLVT.QLVT_DATHANG.dbo.PhieuNhap WHERE NGAY BETWEEN CONVERT(DATETIME,@start,103) AND CONVERT(DATETIME,@end,103)
	SELECT MAVT,CAST(Month(#pn1.NGAY) as varchar) + '-' + cast(YEAR(#pn1.NGAY) as varchar) AS NGAY,SUM(SOLUONG) AS TONGSL,SUM(DONGIA) AS TONGGIA
	INTO #temp1
	FROM #pn1 JOIN LINK_QLVT.QLVT_DATHANG.dbo.CTPN AS ct on ct.MAPN=#pn1.MAPN  
	GROUP BY MAVT,CAST(Month(#pn1.NGAY) as varchar) + '-' + cast(YEAR(#pn1.NGAY) as varchar) 

	SELECT NGAY,TENVT,TONGSL,TONGGIA INTO #kq1 FROM #temp1 JOIN dbo.Vattu ON Vattu.MAVT = #temp1.MAVT

	INSERT INTO #kq1 SELECT * FROM #kq
	SELECT NGAY,TENVT,SUM(TONGSL) AS TONGSL,SUM(TONGGIA) as TONGGIA FROM #kq1 GROUP BY TENVT,NGAY
	END
END
GO
CREATE PROC [dbo].[SP_TKPX] @start NVARCHAR(20),@end NVARCHAR(20),@ct int
AS
BEGIN
	IF 1=0 BEGIN
		SET FMTONLY OFF
	END
	SELECT * INTO #px  FROM dbo.PhieuXuat WHERE NGAY BETWEEN CONVERT(DATETIME,@start,103) AND CONVERT(DATETIME,@end,103)

	SELECT MAVT,CAST(Month(#px.NGAY) as varchar) + '-' + cast(YEAR(#px.NGAY) as varchar) AS NGAY,SUM(SOLUONG) AS TONGSL,SUM(DONGIA) AS TONGGIA
	INTO #temp
	FROM #px JOIN dbo.CTPX ON dbo.CTPX.MAPX =#px.MAPX  
	GROUP BY MAVT,CAST(Month(#px.NGAY) as varchar) + '-' + cast(YEAR(#px.NGAY) as varchar) 

	SELECT NGAY,TENVT,TONGSL,TONGGIA INTO #kq FROM #temp JOIN dbo.Vattu ON Vattu.MAVT = #temp.MAVT

	IF(@ct=0)
	BEGIN
		SELECT * FROM #kq
	END
	ELSE
	BEGIN
	
	SELECT * INTO #px1  FROM LINK_QLVT.QLVT_DATHANG.dbo.PhieuXuat WHERE NGAY BETWEEN CONVERT(DATETIME,@start,103) AND CONVERT(DATETIME,@end,103)
	SELECT MAVT,CAST(Month(#px1.NGAY) as varchar) + '-' + cast(YEAR(#px1.NGAY) as varchar) AS NGAY,SUM(SOLUONG) AS TONGSL,SUM(DONGIA) AS TONGGIA
	INTO #temp1
	FROM #px1 JOIN LINK_QLVT.QLVT_DATHANG.dbo.CTPX AS ct on ct.MAPX=#px1.MAPX
	GROUP BY MAVT,CAST(Month(#px1.NGAY) as varchar) + '-' + cast(YEAR(#px1.NGAY) as varchar) 

	SELECT NGAY,TENVT,TONGSL,TONGGIA INTO #kq1 FROM #temp1 JOIN dbo.Vattu ON Vattu.MAVT = #temp1.MAVT

	INSERT INTO #kq1 SELECT * FROM #kq
	SELECT NGAY,TENVT,SUM(TONGSL) AS TONGSL,SUM(TONGGIA) as TONGGIA FROM #kq1 GROUP BY TENVT,NGAY
	END
    
END
GO
USE QLVT_DATHANG
GO
CREATE PROC SP_GRANT_SP_PERMISSION
AS
BEGIN
	GRANT EXECUTE ON SP_DANGNHAP TO CONGTY
	GRANT CONTROL ON SP_DANGNHAP TO CONGTY
	GRANT EXECUTE ON SP_DDH_CHUA_NHAP TO CONGTY
	GRANT CONTROL ON SP_DDH_CHUA_NHAP TO CONGTY
	GRANT EXECUTE ON SP_DSNV TO CONGTY
	GRANT CONTROL ON SP_DSNV TO CONGTY
	GRANT EXECUTE ON SP_List_LOGIN TO CONGTY
	GRANT CONTROL ON SP_List_LOGIN TO CONGTY
	GRANT EXECUTE ON SP_SLVT TO CONGTY
	GRANT CONTROL ON SP_SLVT TO CONGTY
	GRANT EXECUTE ON SP_TAOLOGIN TO CONGTY
	GRANT CONTROL ON SP_TAOLOGIN TO CONGTY
	GRANT EXECUTE ON SP_TKPN TO CONGTY
	GRANT CONTROL ON SP_TKPN TO CONGTY
	GRANT EXECUTE ON SP_TKPX TO CONGTY
	GRANT CONTROL ON SP_TKPX TO CONGTY
END
